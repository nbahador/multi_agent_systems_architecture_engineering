<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent System Template Textbook</title>
    <style>
        /* Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #ffffff;
        }
        
        /* Layout */
        .container {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 100vh;
        }
        
        /* Table of Contents */
        .toc {
            background-color: #f8f9fa;
            padding: 20px;
            border-right: 1px solid #e9ecef;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        
        .toc h2 {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }
        
        .toc ul {
            list-style: none;
        }
        
        .toc li {
            margin-bottom: 10px;
        }
        
        .toc a {
            color: #3498db;
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s;
            display: block;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .toc a:hover {
            color: #2980b9;
            background-color: #e9ecef;
        }
        
        /* Main Content */
        .content {
            padding: 40px;
            max-width: 1200px;
        }
        
        section {
            margin-bottom: 60px;
            scroll-margin-top: 20px;
        }
        
        /* Typography */
        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #3498db;
        }
        
        h2 {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        h3 {
            font-size: 1.5rem;
            color: #34495e;
            margin-bottom: 15px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        /* Code Blocks */
        .code-block {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }
        
        .code-comment {
            color: #95a5a6;
            font-style: italic;
        }
        
        .code-keyword {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .code-string {
            color: #4ecdc4;
        }
        
        .code-number {
            color: #f39c12;
        }
        
        .code-function {
            color: #ff6b6b;
        }
        
        /* Two-column Code Explanation */
        .code-explanation {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        @media (max-width: 768px) {
            .code-explanation {
                grid-template-columns: 1fr;
            }
        }
        
        /* Demo Boxes */
        .demo-box {
            background-color: #f1f2f6;
            border: 1px solid #3498db;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .input-box {
            background-color: #ffffff;
            border-left: 4px solid #27ae60;
            padding: 15px;
            margin: 15px 0;
        }
        
        .output-box {
            background-color: #fdf2f2;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 15px 0;
        }
        
        /* Flow Diagrams */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin: 30px 0;
            gap: 10px;
        }
        
        .flow-box {
            background-color: #3498db;
            color: white;
            padding: 15px;
            border-radius: 8px;
            min-width: 120px;
            text-align: center;
        }
        
        .flow-arrow {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        /* Status Boxes */
        .status-box {
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid;
            border-radius: 4px;
        }
        
        .warning {
            background-color: #fff3cd;
            border-left-color: #f39c12;
        }
        
        .info {
            background-color: #d1ecf1;
            border-left-color: #17a2b8;
        }
        
        .success {
            background-color: #d4edda;
            border-left-color: #28a745;
        }
        
        /* Buttons */
        .button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .button:hover {
            background-color: #2980b9;
        }
        
        /* Collapsible Sections */
        .collapsible {
            background-color: #f8f9fa;
            color: #2c3e50;
            cursor: pointer;
            padding: 15px;
            width: 100%;
            text-align: left;
            border: none;
            border-radius: 8px 8px 0 0;
            outline: none;
            font-size: 1.1rem;
            font-weight: bold;
            margin-top: 20px;
            position: relative;
        }
        
        .collapsible:after {
            content: '▶';
            font-size: 0.8rem;
            color: #2c3e50;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        .active:after {
            content: '▼';
        }
        
        .collapsible-content {
            padding: 0 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: #f8f9fa;
            border-radius: 0 0 8px 8px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .toc {
                position: static;
                height: auto;
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="toc">
            <h2>Table of Contents</h2>
            <ul>
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#overview">Template Overview</a></li>
                <li><a href="#environment">Environment Setup</a></li>
                <li><a href="#tools">Tool Configuration</a></li>
                <li><a href="#agents">Agent Definitions</a></li>
                <li><a href="#orchestration">System Orchestration</a></li>
                <li><a href="#deployment">Deployment</a></li>
                <li><a href="#examples">Use Case Examples</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
                <li><a href="#interactive-demo">Interactive Demo</a></li>
            </ul>
        </nav>
        
        <main class="content">
            <h1>Multi-Agent System Template Guide</h1>
            
            <section id="introduction">
                <h2>Introduction to Multi-Agent Systems</h2>
                <p>Multi-agent systems are a powerful AI architecture where multiple specialized AI agents work together to accomplish complex tasks. This template provides a structured approach to building such systems using the Google ADK framework with MCP tools integration.</p>
                
                <div class="status-box info">
                    <p><strong>Why Use Multi-Agent Systems?</strong> They allow you to break down complex problems into smaller, manageable tasks handled by specialized agents, resulting in higher quality outputs and more reliable systems.</p>
                </div>
                
                <div class="flow-diagram">
                    <div class="flow-box">User Input</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Research Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Processing Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Formatting Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Final Output</div>
                </div>
            </section>
            
            <section id="overview">
                <h2>Template Overview</h2>
                <p>The sequential agent template creates a pipeline where agents run one after another, perfect for workflows like: Research → Process → Format → Output.</p>
                
                <div class="code-block">
                    <span class="code-comment"># ============================================================================</span><br>
                    <span class="code-comment"># SEQUENTIAL AGENT TEMPLATE - Simple Multi-Agent Pipeline</span><br>
                    <span class="code-comment"># ============================================================================</span><br>
                    <span class="code-keyword">import</span> asyncio<br>
                    <span class="code-keyword">import</span> os<br>
                    <span class="code-keyword">from</span> contextlib <span class="code-keyword">import</span> AsyncExitStack<br>
                    <span class="code-keyword">from</span> dotenv <span class="code-keyword">import</span> load_dotenv<br>
                    <span class="code-keyword">from</span> google.adk.agents.llm_agent <span class="code-keyword">import</span> LlmAgent<br>
                    <span class="code-keyword">from</span> google.adk.agents.sequential_agent <span class="code-keyword">import</span> SequentialAgent<br>
                    <span class="code-keyword">from</span> google.adk.tools.mcp_tool.mcp_toolset <span class="code-keyword">import</span> MCPToolset<br>
                    <span class="code-comment"># ... more imports</span>
                </div>
                
                <button class="collapsible">Key Components</button>
                <div class="collapsible-content">
                    <p>The template consists of several key components:</p>
                    <ul>
                        <li><strong>Environment Setup</strong>: Loads configuration from .env files</li>
                        <li><strong>Tool Configuration</strong>: Sets up external tools and functions</li>
                        <li><strong>Agent Definitions</strong>: Creates specialized AI agents</li>
                        <li><strong>System Orchestration</strong>: Coordinates agent workflows</li>
                        <li><strong>Deployment</strong>: Converts the system to a web API</li>
                    </ul>
                </div>
            </section>
            
            <section id="environment">
                <h2>Environment Setup</h2>
                <p>The environment setup section loads all configuration variables from a .env file, which keeps your API keys, URLs, and secrets secure.</p>
                
                <div class="code-explanation">
                    <div class="code-block">
                        <span class="code-comment"># Load all variables from .env file</span><br>
                        load_dotenv()<br>
                        <br>
                        <span class="code-comment"># Set up logging to see what's happening</span><br>
                        logging.basicConfig(level=logging.INFO)<br>
                        log = logging.getLogger(__name__)<br>
                        <br>
                        <span class="code-comment"># Global variables for main components</span><br>
                        root_agent: LlmAgent | None = None<br>
                        exit_stack: AsyncExitStack | None = None
                    </div>
                    <div>
                        <h3>Explanation</h3>
                        <p>The <code>load_dotenv()</code> function loads environment variables from a .env file in your project directory.</p>
                        <p>Logging is configured to show important messages during execution.</p>
                        <p>Global variables are initialized to hold your main components, which will be set up in later sections.</p>
                        <div class="status-box warning">
                            <p><strong>Important:</strong> Always create a .env file in your project folder with your actual configuration values. Never commit this file to version control.</p>
                        </div>
                    </div>
                </div>
                
                <div class="demo-box">
                    <h3>Environment Variables Example</h3>
                    <div class="input-box">
                        <p>Create a file named <code>.env</code> in your project root with these variables:</p>
                        <div class="code-block">
                            <span class="code-comment"># Database tools server</span><br>
                            DB_TOOLS_URL=http://your-toolbox-server.com<br>
                            <br>
                            <span class="code-comment"># Live function tools server</span><br>
                            FUNCTION_TOOLS_URL=http://your-function-server.com<br>
                            <br>
                            <span class="code-comment"># Public URL where users can access your agent</span><br>
                            PUBLIC_URL=http://your-agent-domain.com
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="tools">
                <h2>Tool Configuration</h2>
                <p>Tools are external functions that your agents can use to perform specific tasks like database queries, API calls, or custom processing.</p>
                
                <div class="flow-diagram">
                    <div class="flow-box">Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Tool Request</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Tool Server</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Response</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Agent</div>
                </div>
                
                <div class="code-explanation">
                    <div class="code-block">
                        <span class="code-comment"># Database Toolset Setup</span><br>
                        toolbox = ToolboxSyncClient(DB_TOOLS_URL)<br>
                        toolDB = toolbox.load_toolset('your-toolset-name')<br>
                        <br>
                        <span class="code-comment"># Live Function Toolset Setup</span><br>
                        toolFunction = MCPToolset(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;connection_params=SseServerParams(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url=FUNCTION_TOOLS_URL,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers={}<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                        )
                    </div>
                    <div>
                        <h3>Explanation</h3>
                        <p><strong>Database Tools</strong>: Pre-built functions stored in a toolbox database. These are loaded using <code>ToolboxSyncClient</code> and <code>load_toolset()</code>.</p>
                        <p><strong>Live Function Tools</strong>: Real-time tools like APIs and external services. These are connected via <code>MCPToolset</code> with server parameters.</p>
                        <div class="status-box info">
                            <p>You can add multiple toolsets if your agents need to access different servers or services. Each agent can be assigned specific tools based on their responsibilities.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="agents">
                <h2>Agent Definitions</h2>
                <p>Agents are specialized AI workers that perform specific tasks in your workflow. Each agent has a model, name, instructions, and assigned tools.</p>
                
                <div class="code-explanation">
                    <div class="code-block">
                        <span class="code-comment"># First Agent - Primary Data Collector/Processor</span><br>
                        first_agent = LlmAgent(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;model=<span class="code-string">'gemini-2.5-flash'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">'data_collector_agent'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;instruction=<span class="code-string">"""REPLACE WITH YOUR AGENT'S JOB"""</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;tools=toolDB<br>
                        )
                    </div>
                    <div>
                        <h3>Agent Components</h3>
                        <ul>
                            <li><strong>Model</strong>: The AI model to use (gemini-2.5-flash, gpt-4, claude-3, etc.)</li>
                            <li><strong>Name</strong>: A descriptive identifier for the agent</li>
                            <li><strong>Instruction</strong>: Clear directions for the agent's responsibilities</li>
                            <li><strong>Tools</strong>: The external functions this agent can use</li>
                        </ul>
                    </div>
                </div>
                
                <button class="collapsible">Example Agent Instructions</button>
                <div class="collapsible-content">
                    <div class="code-block">
                        <span class="code-comment"># Research Agent Example</span><br>
                        instruction=<span class="code-string">"""<br>
You are a research assistant. Your job is to:<br>
1. Take the topic provided by the user<br>
2. Use the 'search_database' tool to find relevant information<br>
3. Return only the raw search results, no commentary<br>
4. If multiple results exist, pick the most relevant one<br>
"""</span>
                    </div>
                    
                    <div class="code-block">
                        <span class="code-comment"># Formatter Agent Example</span><br>
                        instruction=<span class="code-string">"""<br>
You are a content formatter. Your job is to:<br>
1. Take the raw research data from the previous step<br>
2. Use the 'format_content' tool to create a summary<br>
3. Make the output engaging and user-friendly<br>
4. Include key insights and actionable recommendations<br>
"""</span>
                    </div>
                </div>
            </section>
            
            <section id="orchestration">
                <h2>System Orchestration</h2>
                <p>The root agent orchestrates the entire workflow, defining how agents interact and the sequence of execution.</p>
                
                <div class="code-explanation">
                    <div class="code-block">
                        <span class="code-comment"># Root Agent - Orchestrates the entire workflow</span><br>
                        root_agent = SequentialAgent(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">'your_agent_pipeline'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;sub_agents=[first_agent, second_agent],<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment"># description="Processes user input through pipeline"</span><br>
                        )
                    </div>
                    <div>
                        <h3>Orchestration Options</h3>
                        <p><strong>SequentialAgent</strong>: Runs agents one after another in a linear pipeline.</p>
                        <p><strong>LoopAgent</strong>: Runs agents in a loop for iterative processing.</p>
                        <p><strong>Single LlmAgent</strong>: Uses just one agent with multiple tools for simpler tasks.</p>
                    </div>
                </div>
                
                <div class="flow-diagram">
                    <div class="flow-box">User Input</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box" style="background-color: #3498db;">SequentialAgent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box" style="background-color: #27ae60;">First Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box" style="background-color: #27ae60;">Second Agent</div>
                    <div class="flow-arrow">→</div>
                    <div class="flow-box">Final Output</div>
                </div>
            </section>
            
            <section id="deployment">
                <h2>Deployment</h2>
                <p>The deployment section converts your agent system into a web API using Uvicorn, making it accessible to users.</p>
                
                <div class="code-explanation">
                    <div class="code-block">
                        <span class="code-keyword">if</span> __name__ == <span class="code-string">"__main__"</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">import</span> uvicorn<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;SERVER_PORT = 8080<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;SERVER_HOST = <span class="code-string">'0.0.0.0'</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;a2a_app = to_a2a(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root_agent,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port=SERVER_PORT,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public_url=PUBLIC_URL<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;)<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;uvicorn.run(a2a_app, host=SERVER_HOST, port=SERVER_PORT)
                    </div>
                    <div>
                        <h3>Deployment Configuration</h3>
                        <p><strong>SERVER_PORT</strong>: The port number your API will listen on (default: 8080).</p>
                        <p><strong>SERVER_HOST</strong>: The host address ('0.0.0.0' accepts connections from anywhere).</p>
                        <p><strong>public_url</strong>: The public URL where users can access your agent.</p>
                        <div class="status-box success">
                            <p>Once deployed, your agent system becomes a web API that can receive requests and return processed responses through the complete agent pipeline.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="examples">
                <h2>Use Case Examples</h2>
                <p>Here are some practical examples of how to use this template for different applications:</p>
                
                <button class="collapsible">Blog Post Creation System</button>
                <div class="collapsible-content">
                    <div class="code-block">
                        <span class="code-comment"># 1. Research Agent</span><br>
                        research_agent = LlmAgent(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;model=<span class="code-string">'gemini-2.5-flash'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">'research_agent'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;instruction=<span class="code-string">"""You are a research assistant for blog writing..."""</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;tools=research_tools<br>
                        )<br>
                        <br>
                        <span class="code-comment"># 2. Blog Writer Agent</span><br>
                        writer_agent = LlmAgent(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;model=<span class="code-string">'gemini-2.5-flash'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">'blog_writer'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;instruction=<span class="code-string">"""You are a professional blog writer..."""</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;tools=[writing_tools]<br>
                        )<br>
                        <br>
                        <span class="code-comment"># 3. Root Agent</span><br>
                        root_agent = SequentialAgent(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;name=<span class="code-string">'blog_creation_system'</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;sub_agents=[research_agent, writer_agent]<br>
                        )
                    </div>
                </div>
                
                <button class="collapsible">Customer Support Pipeline</button>
                <div class="collapsible-content">
                    <p><strong>Agent 1</strong>: Categorizes customer inquiry using classification tools</p>
                    <p><strong>Agent 2</strong>: Searches knowledge base and creates personalized response</p>
                    <div class="flow-diagram">
                        <div class="flow-box">Customer Query</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Categorizer Agent</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Response Agent</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Final Reply</div>
                    </div>
                </div>
            </section>
            
            <section id="troubleshooting">
                <h2>Troubleshooting Guide</h2>
                <p>Common issues and solutions when working with the multi-agent system template:</p>
                
                <div class="status-box warning">
                    <p><strong>Problem:</strong> ImportError - can't import google.adk</p>
                    <p><strong>Solution:</strong> Install Google ADK: <code>pip install google-adk</code></p>
                </div>
                
                <div class="status-box warning">
                    <p><strong>Problem:</strong> Tool connection fails</p>
                    <p><strong>Solution:</strong> Check your .env file URLs, make sure servers are running</p>
                </div>
                
                <div class="status-box warning">
                    <p><strong>Problem:</strong> Agent gives generic responses</p>
                    <p><strong>Solution:</strong> Make instructions more specific, add examples in instructions</p>
                </div>
                
                <div class="status-box info">
                    <p><strong>Testing Tips:</strong></p>
                    <ul>
                        <li>Test each agent individually before combining them</li>
                        <li>Use print statements to debug data flow between agents</li>
                        <li>Check tool responses are what you expect</li>
                        <li>Verify .env variables load correctly with print statements</li>
                    </ul>
                </div>
            </section>
            
            <section id="interactive-demo">
                <h2>Interactive Demo</h2>
                <p>Experiment with a simplified version of the agent pipeline to understand how data flows through the system:</p>
                
                <div class="demo-box">
                    <h3>Blog Creation Pipeline Simulator</h3>
                    
                    <div class="input-box">
                        <label for="topic-input">Enter a blog topic:</label>
                        <input type="text" id="topic-input" value="Sustainable gardening" style="width: 100%; padding: 8px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px;">
                        <button class="button" onclick="runDemo()">Run Pipeline</button>
                    </div>
                    
                    <div class="output-box">
                        <h4>Pipeline Output:</h4>
                        <div id="demo-output" style="min-height: 200px; padding: 10px; background-color: white; border-radius: 4px;">
                            <p>Output will appear here after running the pipeline...</p>
                        </div>
                    </div>
                    
                    <div class="flow-diagram">
                        <div class="flow-box">Input</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Research</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Writing</div>
                        <div class="flow-arrow">→</div>
                        <div class="flow-box">Output</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Collapsible sections functionality
        const collapsibles = document.getElementsByClassName("collapsible");
        
        for (let i = 0; i < collapsibles.length; i++) {
            collapsibles[i].addEventListener("click", function() {
                this.classList.toggle("active");
                const content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }
        
        // Smooth scrolling for table of contents links
        document.querySelectorAll('.toc a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                window.scrollTo({
                    top: targetElement.offsetTop - 20,
                    behavior: 'smooth'
                });
            });
        });
        
        // Interactive demo functionality
        function runDemo() {
            const topic = document.getElementById('topic-input').value || 'Sustainable gardening';
            const output = document.getElementById('demo-output');
            
            output.innerHTML = '<p>Running research agent...</p>';
            
            // Simulate agent processing with delays
            setTimeout(() => {
                output.innerHTML += `<p>Research agent found information about: ${topic}</p>`;
                output.innerHTML += '<p>Running writing agent...</p>';
                
                setTimeout(() => {
                    output.innerHTML += `<p>Writing agent created blog post about: ${topic}</p>`;
                    output.innerHTML += '<p>Pipeline completed successfully!</p>';
                    
                    // Show final output
                    setTimeout(() => {
                        output.innerHTML += `
                            <div style="margin-top: 20px; padding: 15px; background-color: #e8f5e9; border-radius: 4px;">
                                <h4>Final Blog Post:</h4>
                                <h3>The Ultimate Guide to ${topic}</h3>
                                <p>Introduction: ${topic} is becoming increasingly important in today's world. In this comprehensive guide, we'll explore the key principles and practices...</p>
                                <p>Key sections:</p>
                                <ul>
                                    <li>Benefits of ${topic}</li>
                                    <li>Getting started with ${topic}</li>
                                    <li>Advanced techniques for success</li>
                                    <li>Common mistakes to avoid</li>
                                </ul>
                                <p>Conclusion: ${topic} offers numerous benefits when implemented correctly. Start your journey today!</p>
                            </div>
                        `;
                    }, 1000);
                }, 1500);
            }, 1500);
        }
    </script>
</body>
</html>
